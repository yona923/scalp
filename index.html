<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <title>ë‘í”¼ ìê°€ ì§„ë‹¨ & ëŒ€ë¨¸ë¦¬ ì˜ˆì¸¡</title>
    <style>
        /* ì „ë°˜ì ì¸ ìŠ¤íƒ€ì¼(ë³´ë¼ í…Œë§ˆ ë“±) - ê°„ë‹¨íˆ ìœ ì§€ */
        body {
            margin: 0; 
            padding: 0;
            font-family: Arial, sans-serif;
            background-color: #f9f6fd; /* ì—°í•œ ë³´ë¼ ë°°ê²½ */
            color: #4a148c; /* ì§™ì€ ë³´ë¼ í…ìŠ¤íŠ¸ */
        }
        header {
            background-color: #7e57c2; /* ì¤‘ê°„ í†¤ ë³´ë¼ */
            color: #fff;
            text-align: center;
            padding: 1.5rem 0;
        }
        main {
            max-width: 800px;
            margin: 2rem auto;
            background: #fff;
            border-radius: 8px;
            box-shadow: 0 4px 10px rgba(126,87,194,0.2);
            padding: 2rem;
        }
        h1, h2 {
            margin: 1rem 0;
            text-align: center;
        }
        .form-group {
            margin-bottom: 2rem;
            text-align: center;
        }
        .form-group label {
            display: block;
            font-weight: bold;
            margin-bottom: 1rem;
            color: #4a148c;
        }
        .button {
            background-color: #7e57c2;
            border: none;
            border-radius: 5px;
            color: #fff;
            padding: 1rem 2rem;
            margin: 0.3rem;
            cursor: pointer;
            font-size: 1rem;
            position: relative; /* ì˜¤ë²„ë ˆì´ìš© */
        }
        .button:hover {
            background-color: #6a44aa;
        }
        .button.selected {
            background-color: #6a44aa;
        }
        /* ì„ íƒëœ ë²„íŠ¼ ì˜¤ë²„ë ˆì´ë‚˜ ì²´í¬ ë§ˆí¬ ì˜ˆì‹œ */
        .button.selected::after {
            content: "âœ”";
            position: absolute;
            top: 5px;
            right: 5px;
            font-size: 1.2rem;
            color: #fff;
        }
        .result {
            margin-top: 1.5rem;
            padding: 1.5rem;
            border-left: 5px solid #7e57c2;
            background-color: #f0e6fa;
            border-radius: 5px;
            text-align: center;
            white-space: pre-line; /* ì¤„ë°”ê¿ˆ ì§€ì› */
        }
        .hidden {
            display: none;
        }
        footer {
            text-align: center;
            margin-top: 2rem;
            padding: 1rem 0;
            background: #7e57c2;
            color: #fff;
        }
        /* ë¡œë”© ì• ë‹ˆë©”ì´ì…˜ì„ ìœ„í•œ í”„ë¡œê·¸ë ˆìŠ¤ ë°” */
        .loading-container {
            width: 80%;
            max-width: 400px;
            height: 10px;
            background-color: #ddd;
            border-radius: 5px;
            overflow: hidden;
            margin: 1rem auto;
        }
        .loading-bar {
            width: 0;
            height: 100%;
            background-color: #7e57c2;
            transition: width 0.1s ease-in;
        }
    </style>
</head>
<body>

<header>
    <h1>ë‘í”¼ ìê°€ ì§„ë‹¨ & ëŒ€ë¨¸ë¦¬ ì˜ˆì¸¡</h1>
</header>

<main>
    <!-- ë‘í”¼ ìê°€ ì§„ë‹¨ í…ŒìŠ¤íŠ¸ -->
    <h2>ë‘í”¼ ìê°€ ì§„ë‹¨ í…ŒìŠ¤íŠ¸</h2>
    <form id="diagnosisForm">
        <div class="form-group" data-question="scalpType">
            <label>ë‘í”¼ ìƒíƒœë¥¼ ì„ íƒí•˜ì„¸ìš”:</label>
            <button type="button" class="button" onclick="selectScalpType('ê¸°ë¦„ì§€ë‹¤', event)">ê¸°ë¦„ì§€ë‹¤</button>
            <button type="button" class="button" onclick="selectScalpType('ê±´ì¡°í•˜ë‹¤', event)">ê±´ì¡°í•˜ë‹¤</button>
            <button type="button" class="button" onclick="selectScalpType('ê°€ë µë‹¤', event)">ê°€ë µë‹¤</button>
            <button type="button" class="button" onclick="selectScalpType('ì •ìƒì´ë‹¤', event)">ì •ìƒì´ë‹¤</button>
        </div>
        <div class="form-group" data-question="hairLoss">
            <label>íƒˆëª¨ ì§„í–‰ ì—¬ë¶€:</label>
            <button type="button" class="button" onclick="selectHairLoss('ë¨¸ë¦¬ì¹´ë½ì´ ìì£¼ ë¹ ì§„ë‹¤', event)">ë¨¸ë¦¬ì¹´ë½ì´ ìì£¼ ë¹ ì§„ë‹¤</button>
            <button type="button" class="button" onclick="selectHairLoss('ë¨¸ë¦¬ì¹´ë½ì´ ê°€ëŠ˜ì–´ì§„ë‹¤', event)">ë¨¸ë¦¬ì¹´ë½ì´ ê°€ëŠ˜ì–´ì§„ë‹¤</button>
            <button type="button" class="button" onclick="selectHairLoss('ì•„ë‹ˆë‹¤', event)">ì•„ë‹ˆë‹¤</button>
        </div>
        <div class="form-group" data-question="habit">
            <label>ìƒí™œ ìŠµê´€ì„ ì„ íƒí•˜ì„¸ìš”:</label>
            <button type="button" class="button" onclick="selectHabit('0.5L ë¯¸ë§Œ', event)">ë¬¼ ì„­ì·¨ëŸ‰: 0.5L ë¯¸ë§Œ</button>
            <button type="button" class="button" onclick="selectHabit('1L', event)">ë¬¼ ì„­ì·¨ëŸ‰: 1L</button>
            <button type="button" class="button" onclick="selectHabit('2L ì´ìƒ', event)">ë¬¼ ì„­ì·¨ëŸ‰: 2L ì´ìƒ</button>
        </div>
        <div class="form-group" data-question="familyHistory">
            <label>ê°€ì¡±ë ¥:</label>
            <button type="button" class="button" onclick="selectFamily('ìˆë‹¤', event)">ë¶€ëª¨ë‹˜ ì¤‘ í•œ ë¶„ì´ë¼ë„ íƒˆëª¨ê°€ ìˆë‹¤</button>
            <button type="button" class="button" onclick="selectFamily('ì—†ë‹¤', event)">ì—†ë‹¤</button>
        </div>
        <div class="form-group">
            <button type="button" class="button" style="width:100%;" onclick="diagnoseScalp()">ì§„ë‹¨í•˜ê¸°</button>
        </div>
    </form>
    <div id="diagnosisResult" class="result hidden"></div>

    <!-- ëŒ€ë¨¸ë¦¬ ì˜ˆì¸¡ ë¨¸ì‹  -->
    <h2>ëŒ€ë¨¸ë¦¬ ì˜ˆì¸¡ ë¨¸ì‹ </h2>
    <div class="form-group">
        <label>ë‘í”¼ ì‚¬ì§„ì„ ì—…ë¡œë“œí•˜ì„¸ìš”:</label>
        <input type="file" id="scalpPhoto" accept="image/*" />
    </div>
    <div class="form-group">
        <button type="button" class="button" onclick="predictBaldness()">ëŒ€ë¨¸ë¦¬ ê°€ëŠ¥ì„± ì˜ˆì¸¡</button>
    </div>
    
    <!-- ë¡œë”©ë°” & ê²°ê³¼ ì„¹ì…˜ -->
    <div id="loadingSection" class="hidden">
        <div class="loading-container">
            <div id="loadingBar" class="loading-bar"></div>
        </div>
        <p style="text-align:center;">ì§„ë‹¨ ì¤‘ì…ë‹ˆë‹¤... ì ì‹œë§Œ ê¸°ë‹¤ë ¤ì£¼ì„¸ìš”.</p>
    </div>
    <div id="baldnessResult" class="result hidden"></div>
</main>

<footer>
    &copy; 2024 ë‘í”¼ ê´€ë¦¬ ë„êµ¬. ëª¨ë“  ê¶Œë¦¬ ë³´ìœ .
</footer>

<script>
    /* -----------------------------
       ìƒíƒœ ì €ì¥ìš© ë³€ìˆ˜
     ----------------------------- */
    let scalpType = "";
    let hairLoss = "";
    let habit = "";
    let familyHistory = "";

    /* -----------------------------
       ê³µí†µ í—¬í¼ í•¨ìˆ˜: ë²„íŠ¼ ì„ íƒ ì‹œ UI í‘œì‹œ
       ë™ì¼ ì§ˆë¬¸ ê·¸ë£¹ ë‚´ ë‹¤ë¥¸ ë²„íŠ¼ì„ ë¹„í™œì„±í™”
     ----------------------------- */
    function handleButtonSelection(event) {
        const btn = event.target;
        const parentGroup = btn.closest(".form-group"); 
        // ê°™ì€ ê·¸ë£¹ì˜ ëª¨ë“  ë²„íŠ¼ì—ì„œ .selected ì œê±°
        parentGroup.querySelectorAll(".button").forEach((button) => {
            button.classList.remove("selected");
        });
        // í˜„ì¬ í´ë¦­ëœ ë²„íŠ¼ë§Œ .selected ì¶”ê°€
        btn.classList.add("selected");
    }

    /* -----------------------------
       ë‘í”¼ ìê°€ ì§„ë‹¨ ì„ íƒ í•¨ìˆ˜
     ----------------------------- */
    function selectScalpType(type, event) {
        scalpType = type;
        handleButtonSelection(event);
    }
    function selectHairLoss(loss, event) {
        hairLoss = loss;
        handleButtonSelection(event);
    }
    function selectHabit(habitValue, event) {
        habit = habitValue;
        handleButtonSelection(event);
    }
    function selectFamily(family, event) {
        familyHistory = family;
        handleButtonSelection(event);
    }

    /* -----------------------------
       ë‘í”¼ ìê°€ ì§„ë‹¨ ê²°ê³¼
     ----------------------------- */
    function diagnoseScalp() {
        if (!scalpType || !hairLoss || !habit || !familyHistory) {
            alert("ëª¨ë“  í•­ëª©ì„ ì„ íƒí•´ì£¼ì„¸ìš”.");
            return;
        }

        const scalpResults = {
            "ê¸°ë¦„ì§€ë‹¤": "ê¸°ë¦„ì§„ ë‘í”¼! ë‘í”¼ í´ë Œì§•ì— ì‹ ê²½ì“°ì„¸ìš”.",
            "ê±´ì¡°í•˜ë‹¤": "ê±´ì¡°í•œ ë‘í”¼! ìˆ˜ë¶„ ë³´ì¶©ì´ í•„ìš”í•©ë‹ˆë‹¤.",
            "ê°€ë µë‹¤": "ê°€ë ¤ìš´ ë‘í”¼! ê°ì§ˆ ê´€ë¦¬ì™€ ì§„ì • ì¼€ì–´ê°€ ì¢‹ìŠµë‹ˆë‹¤.",
            "ì •ìƒì´ë‹¤": "ê±´ê°•í•œ ë‘í”¼! ì§€ê¸ˆ ìƒíƒœë¥¼ ì˜ ìœ ì§€í•˜ì„¸ìš”."
        };

        const resultDiv = document.getElementById("diagnosisResult");
        resultDiv.classList.remove("hidden");
        resultDiv.innerText = `â–  ë‘í”¼ ìƒíƒœ: ${scalpResults[scalpType]}\nâ–  íƒˆëª¨ ì§„í–‰ ì—¬ë¶€: ${hairLoss}\nâ–  ë¬¼ ì„­ì·¨ëŸ‰: ${habit}\nâ–  ê°€ì¡±ë ¥: ${familyHistory}\n\n(ê²°ê³¼ë¥¼ í† ëŒ€ë¡œ ê¾¸ì¤€í•œ ë‘í”¼ ê´€ë¦¬ë¥¼ ì¶”ì²œí•©ë‹ˆë‹¤.)`;
    }

    /* -----------------------------
       ëŒ€ë¨¸ë¦¬ ì˜ˆì¸¡ ê¸°ëŠ¥
     ----------------------------- */
    function predictBaldness() {
        const fileInput = document.getElementById("scalpPhoto");
        const fileList = fileInput.files;
        const baldnessResultDiv = document.getElementById("baldnessResult");
        const loadingSection = document.getElementById("loadingSection");
        const loadingBar = document.getElementById("loadingBar");

        // ì´ˆê¸°í™”
        baldnessResultDiv.classList.add("hidden");
        loadingSection.classList.add("hidden");
        loadingBar.style.width = "0";

        if (!fileList || fileList.length === 0) {
            alert("ë‘í”¼ ì‚¬ì§„ì„ ì²¨ë¶€í•´ì£¼ì„¸ìš”.");
            return;
        }

        // ë¡œë”© ì„¹ì…˜ ë…¸ì¶œ
        loadingSection.classList.remove("hidden");

        // ê°€ì§œ ì§„ë‹¨ ì‹œë®¬ë ˆì´ì…˜: ë¡œë”©ë°”ë¥¼ 2ì´ˆ ë™ì•ˆ ì±„ìš°ê³  ê²°ê³¼ ë³´ì—¬ì£¼ê¸°
        let progress = 0;
        const interval = setInterval(() => {
            progress += 5; // ì¦ê°€í­ ì¡°ì ˆ ê°€ëŠ¥
            loadingBar.style.width = progress + "%";

            if (progress >= 100) {
                clearInterval(interval);
                // ë¡œë”© ëë‚˜ë©´ ê²°ê³¼ í‘œì‹œ
                loadingSection.classList.add("hidden");
                baldnessResultDiv.classList.remove("hidden");

                const randomChance = Math.floor(Math.random() * 100);
                const messages = [
                    `10ë…„ í›„ì—ë„ í’ì„±í•  ì˜ˆì •! ğŸ¦ (ê°€ëŠ¥ì„±: ${randomChance}%)`,
                    `5ë…„ í›„ ëª¨ìê°€ í•„ìš”í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤! ğŸ§¢ (ê°€ëŠ¥ì„±: ${randomChance}%)`,
                    `ì´ë¯¸ íƒˆëª¨ê°€ ì§„í–‰ ì¤‘ì¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤! ğŸ›‘ (ê°€ëŠ¥ì„±: ${randomChance}%)`
                ];
                baldnessResultDiv.innerText = messages[randomChance % 3];
            }
        }, 100); // 0.1ì´ˆë§ˆë‹¤ ë¡œë”©ë°” ì—…ë°ì´íŠ¸
    }
</script>

</body>
</html>
